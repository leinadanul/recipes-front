<div class="modal-container">
  <div class="modal-image" [ngClass]="{'pointer-cursor': isEditing}"  (click)="triggerFileInput()">
    <img [src]="imagePreview || recipeInfo.imageUrl" alt="{{ recipeInfo.name }}">
    <input type="file" #fileInput style="display: none;" (change)="onFileSelected.emit($event)">
  </div>
  <div class="modal-info">
    <form [formGroup]="recipeForm" (ngSubmit)="saveRecipe()">
      <p><strong>Name:</strong></p>
      <mat-form-field>
        <input matInput formControlName="name">
      </mat-form-field>

      <p><strong>Description:</strong></p>
      <mat-form-field>
        <textarea matInput formControlName="description"></textarea>
      </mat-form-field>

      <p><strong>Ingredients:</strong></p>
      <ul *ngIf="!isEditing">
        <li *ngFor="let ingredient of recipeInfo.ingredients">{{ ingredient }}</li>
      </ul>
      <div *ngIf="isEditing" formArrayName="ingredients">
        <div *ngFor="let ingredient of ingredients.controls; let i = index" [formGroupName]="i">
          <mat-form-field>
            <input matInput formControlName="ingredient">
          </mat-form-field>
          <mat-icon mat-button type="button" class="trash-bin_icon" (click)="removeIngredient(i)">delete_outline</mat-icon>
        </div>
        <button mat-button type="button" (click)="addIngredient()"> + Ingredient</button>
      </div>

      <p><strong>Preparation Time:</strong></p>
      <mat-form-field>
        <input matInput formControlName="preparationTime" type="number">
      </mat-form-field>

      <p><strong>Instructions:</strong></p>
      <mat-form-field>
        <textarea matInput formControlName="instructions"></textarea>
      </mat-form-field>

      <p><strong>RecipeType:</strong></p>
      <mat-form-field>
        <mat-select formControlName="recipeType">
          <mat-option value="NORMAL">Normal</mat-option>
          <mat-option value="VEGAN">Vegan</mat-option>
          <mat-option value="LIGHT">Light</mat-option>
        </mat-select>
      </mat-form-field>

      <div mat-dialog-actions class="actions-icon">
        <mat-icon mat-button color="warn" class="trash-icon" (click)="openDeleteConfirmation()">delete_outline</mat-icon>
        <mat-icon mat-button color="primary" class="edit-icon" (click)="enableEditing()">edit</mat-icon>
        <button mat-icon-button color="primary" class="save-icon" *ngIf="isEditing" type="submit">
          <mat-icon>save</mat-icon>
        </button>
        <mat-icon mat-button color="warm" class="save-icon" *ngIf="isEditing" (click)="disableEditing()">cancel</mat-icon>
      </div>
    </form>
  </div>
</div>
<div *ngIf="isLoading" class="loading-overlay">
  <mat-spinner></mat-spinner>
</div>
